<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Полярная викторина</title>
<style>
body { font-family: Arial; max-width:800px; margin:auto; padding:20px }
#timer { color:red; font-weight:bold }
#answers label { display:block; margin:5px 0 }
#nextBtn { margin-top:15px; padding:10px 20px }
#explanation {
  display:none;
  margin-top:15px;
  padding:10px;
  background:#f3f3f3;
  border-left:4px solid #333;
}
img { max-width:100%; margin-top:10px }
</style>
</head>
<body>

<h1>Полярная викторина</h1>

<div id="userData">
  <input id="firstName" placeholder="Имя"><br>
  <input id="lastName" placeholder="Фамилия"><br>
  <input id="contact" placeholder="Контакт"><br><br>
  <button id="startBtn">Начать</button>
</div>

<div id="quiz" style="display:none">
  <div id="timer">2:00</div>
  <div id="question"></div>
  <div id="answers"></div>
  <div id="explanation"></div>
  <button id="nextBtn">Следующий вопрос</button>
</div>

<div id="result" style="display:none">
  <h2 id="finalScore"></h2>
</div>

<script>
// ================= КОММЕНТАРИИ =================
const comments = {
1: "Фраза \"лучший ледокол — это ветер\" является метафорой, которая подразумевает, что сила природы, особенно ветер, может быть мощной и эффективной для преодоления ледяных препятствий, иногда даже более эффективной, чем специально построенные корабли. Эта метафора подчеркивает силу стихий и их способность справляться с тем, что кажется невозможным.",
2: "Как вам известно, в Антарктиде для достижения труднодоступных станций, расположенных в глубине материка, используется гусеничный транспорт. В советское время это были тяжелые машины-тягачи, которые водили настоящие танкисты. Вот и праздник свой они привезли в Антарктиду.",
3: "Руаль Амундсен написал эти строки после того, как достиг Южного полюса. Ведь изначально он планировал достичь Полюса Северного. Поэтому он и говорит о том, что стоит диаметрально противоположно от точки своих мечтаний.",
4: "Действительно Пайер писал о том, что не было никакой возможности нормально заниматься, так как люди из задних рядов просто не видели, что написано на доске из-за плотной завесы пара",
5: "Координаты полярного круга — 66°33′",
6: "Останки рогов северного оленя легко можно найти, гуляя по тундре, так как эти звери сбрасывают их ежегодно",
7: "Для правильного ответа нужно было внимательно прочитать один из вопросов выше. Через 8 лет после гипотезы Шиллинга австро-венгерская экспедиция нашла землю как-раз между Шпицбергеном и Новой Землёй. Эта земля впоследствии стала Землёй Франца Иосифа",
8: "Экспедиция Роберта Скотта закончилась достижением Южного полюса, но англичане оказались только вторыми, проиграв гонку Руалю Амундсену. А на обратном пути группа Скота и вовсе погибла. Главной причиной неудачи Скотта многие считают неверный выбор транспорта - сани с двигателем и пони. Первые сломались уже в самом начале пути, а вторые на половине пути погибли. У Скотта были собаки, но он по какой-то неведомой причине считал, что с ними невозможно добраться до полюса. Хотя Амундсен добрался.На заднем плане фотографии вулкан Эребус, рядом с которым располагалась зимовочная база экспедиции Скотта.",
10: "Людей, купающихся в холодной воде, называют моржами",
11: "Парусно-моторная шхуна «Фрам» на которой Нансен дрейфовал во льдах Северного Ледовитого океана можно сказать является символом Норвегии",
12: "30 марта 1867 года Россия продала США Аляску за 7.2 млн долларов золотом. Договор подписали император Александр II и президент США Эндрю Джонсон.",
13: "Ледокол Красин был назван так в честь Леонида Борисовича Красина, дипломата, который смог вернуть корабль в нашу страну.",
14: "Здесь перечислены имена людей, в честь которых названы некоторые моря Северного Ледовитого океана: Харитон и Дмитрий Лаптевы, Френсис Бофорт, Уиллем Баренц, и неизвестная Карина, с её Карским морем",
15: "В Лапландии как известно живет Йоулупукки, ну а для кого-то - Санта Клаус. Но дубинки у него нет. Зато дубинка (в виде посоха) имеется у нашего Деда Мороза"
};

// ================= ВОПРОСЫ =================
const questions = [
  { type: "choice", text: "Вопрос 1. Что, по мнению многих полярников, является лучшим ледоколом?", options: ["Ледокол «50 лет Победы»","Ветер","Айсберг","Солнце"], correct: "Ветер", points: 1 },
  { type: "choice", text: "Вопрос 2. Как известно, Антарктида является единственной территорией на планете, которая не принадлежит никому. Более того, на ней запрещено вести какую-либо военную деятельность, размещать воинские части и оружие. Но исторически так сложилось, что в Антарктиде, на российских станциях всё же празднуется один военный праздник. И в данном случае это не 9 мая и не 23 февраля. А что же это за праздник?", options: ["День военно-морского флота","День Авиации","День Десантника","День Танкиста"], correct: "День Танкиста", points: 2 },
  { type: "choice", text: "Вопрос 3. Какой известный полярник является автором данной цитаты:\n\n«Цель достигнута, путешествие закончено. Не могу сказать, хотя знаю, что прозвучало бы куда эффектнее, — что я достиг цели своей жизни. Это было бы уж явной и откровенной выдумкой. Лучше буду честен и скажу прямо, что, по-моему, ещё никогда никто из людей не стоял в точке, диаметрально противоположной цели его стремлений в таком полном смысле слова, как я в этом случае…»", options: ["Фритьоф Нансен","Георгий Седов","Руаль Амундсен","Роберт Пири"], correct: "Руаль Амундсен", points: 2 },
  { type: "choice", text: "Вопрос 4. Австро-Венгерская экспедиция под командованием Юлиуса Пайера и Карла Вайпрехта проходила в 1871–1874 гг. на судне «Адмирал Тегетгоф». Целью экспедиции являлся проход по Северному морскому пути, однако корабль был затёрт во льдах и более года дрейфовал. Во время дрейфа был открыт архипелаг Земля Франца Иосифа.\n\nЮлиус Пайер писал, что во время зимовки для экипажа проводились занятия прямо на палубе под тентом. Однако часто ученикам было не видно то, что преподаватель пишет на доске. По какой причине?", options: ["Было темно","Пар изо рта полярников ухудшал видимость","Был плохой мел"], correct: "Пар изо рта полярников ухудшал видимость", points: 3 },
  { type: "choice", text: "Вопрос 5. ОНА воображаема, как и её сестра, причём имя ЕЁ — мужского рода. А вот автор вопроса очень часто обозначает её при помощи двух чисел. Одно из этих чисел больше другого ровно в два раза.\n\nКто ОНА?", options: ["Меридиан","Экватор","Тропик","Полярный круг"], correct: "Полярный круг", points: 2 },
  { type: "choice", text: "Вопрос 6. Главный герой сериала «Настоящий детектив» назвал ЭТО «короной». Хотя для людей приписывание такой короны — не самая приятная учесть. А ещё ЭТО можно найти, просто гуляя по арктической тундре.\n\nА кому ЭТО принадлежит?", options: ["Белому медведю","Оленю","Чайке","Полярнику"], correct: "Оленю", points: 2 },
  { type: "choice", text: "Вопрос 7. В 1865 году, основываясь на изучении течений и дрейфа льдов Северного Ледовитого океана, русский морской офицер Николай Густавович Шиллинг выдвинул одну гипотезу, которая через восемь лет была подтверждена австро-венгерскими исследователями. Попробуйте догадаться, что предсказал или нашёл Шиллинг?", options: ["Предсказал глобальное потепление","Нашёл рыбные места","Предсказал наличие земли между Новой Землёй и Шпицбергеном","Отыскал пропавшую экспедицию"], correct: "Предсказал наличие земли между Новой Землёй и Шпицбергеном", points: 3 },
  { type: "choice", text: "Вопрос 8. Перед вами фотография, сделанная в одной полярной экспедиции. Несмотря на то, что главная цель этой экспедиции была достигнута, она всё равно в итоге оказалась неудачной, и даже трагичной. И как ни странно, одной из главных причин неудачи многие историки связывают с тем, что изображено на этой фотографии.\n\nЧто это была за экспедиция?", image: "images/IMG_4755.JPG", options: ['Экспедиция "Терра Нова" Роберта Скотта',"Экспедиция Франклина 1845—1847 годов",'Норвежская полярная экспедиция (1893—1896) на "Фраме"',"Австралийская антарктическая экспедиция Дугласа Моусона"], correct: 'Экспедиция "Терра Нова" Роберта Скотта', points: 2 },
  { type: "text", text: "Вопрос 9. Как называется район Москвы, флаг которого здесь изображён?", image: "images/Flag_of_Severnoye_Medvedkovo_District_(Moscow).svg.png", correct: "Северное Медведково", points: 2 },
  { type: "text", text: "Вопрос 10. Латинское название этих животных буквально означает «ходячий на зубах». А ещё в честь них иногда называют определённую группу людей.", correct: ["Морж", "Моржи"], points: 2 },
  { type: "text", text: "Вопрос 11. В честь него названы пролив, остров, глубоководная впадина, кратер на Марсе и даже футбольный клуб в Норвегии. Вообще в Норвегии в честь него много чего называли. Причём это даже не человек. А что же это тогда?", correct: "Фрам", points: 3 },
  { type: "text", text: "Вопрос 12. В 1867 году два государства заключили договор на покупку и продажу некоторой недвижимости, которую газеты впоследствии прозвали «Джонсоновским зоопарком белых медведей». Что это была за недвижимость?", correct: ["Аляска", "полуостров Аляска"], points: 3 },
  { type: "text", text: "Вопрос 13. Ледокол «Святогор» был построен в городе Ньюкасл в 1917 году. В том же году на нём был поднят Андреевский флаг, и ледокол вошёл в состав флота Российской империи. В 1918 году «Святогор» был затоплен в дельте Северной Двины для препятствования кораблям английских интервентов. В феврале 1920 года интервенты отступили, забрав с собой ледокол в Англию. В 1922 году советскому правительству удалось выкупить «Святогор». Назовите фамилию дипломата, организовавшего возвращение ледокола в Россию.", correct: "Красин", points: 3 },
  { type: "text-multiple", text: "Вопрос 14. Ниже перечислены 5 разных имён. Из этих имён вы можете расшифровать 4 географических объекта, расположенных в Арктике. Объекты имеют общую сущность. Назовите эти объекты:\n\nХаритон, Карина, Френсис, Дмитрий, Уиллем", correct: ["море Бофорта","море Лаптевых","Карское море","Баренцево море"], points: 4 },
  { type: "text", text: "Вопрос 15. Перед вами герб одной северной провинции. Как видите, на ней изображён мужик с дубиной. А ещё эта провинция является родиной другого мужика, у которого обычно дубины нет. Зато \"дубина\" есть у его коллеги из соседней страны.\n\nГерб какой провинции изображён на картинке?", image: "images/Снимоквы.JPG", correct: "Лапландия", points: 5 }
];

// ================= ПЕРЕМЕННЫЕ =================
let current=0, score=0, timer, timeLeft=120;
let showingExplanation = false;
let userAnswers=[];

// ================= ЭЛЕМЕНТЫ =================
const quiz=document.getElementById("quiz");
const qDiv=document.getElementById("question");
const aDiv=document.getElementById("answers");
const expl=document.getElementById("explanation");
const nextBtn=document.getElementById("nextBtn");
const timerDiv=document.getElementById("timer");
const finalScore = document.getElementById("finalScore");

// ================= СТАРТ =================
startBtn.onclick=()=>{
  if(!firstName.value||!lastName.value||!contact.value){
    alert("Все поля обязательны"); return;
  }
  userData.style.display="none";
  quiz.style.display="block";
  loadQuestion();
};

// ================= ВОПРОС =================
function loadQuestion(){
  showingExplanation=false;
  expl.style.display="none";
  nextBtn.textContent="Следующий вопрос";

  const q=questions[current];
  qDiv.innerHTML=`<p>${q.text}</p>`;
  if(q.image) qDiv.innerHTML+=`<img src="${q.image}">`;

  aDiv.innerHTML="";
  if(q.type==="choice"){
    q.options.forEach(o=>{
      aDiv.innerHTML+=`<label><input type="radio" name="answer" value="${o}"> ${o}</label>`;
    });
  } else {
    aDiv.innerHTML=`<input id="textAnswer" style="width:100%">`;
  }

  clearInterval(timer);
  timeLeft=120;
  timer=setInterval(()=>{
    timerDiv.textContent=`${Math.floor(timeLeft/60)}:${String(timeLeft%60).padStart(2,"0")}`;
    if(--timeLeft<0) showExplanation();
  },1000);
}

// ================= ОБРАБОТКА =================
nextBtn.onclick=()=>{
  if(!showingExplanation){
    showExplanation();
  } else {
    current++;
    if(current>=questions.length) finish();
    else loadQuestion();
  }
};

function showExplanation(){
  clearInterval(timer);
  showingExplanation=true;
  nextBtn.textContent="Продолжить";

  const q=questions[current];
  let answer="", earned=0;

  if(q.type==="choice"){
    const sel=document.querySelector('input[name="answer"]:checked');
    if(sel) answer=sel.value;
    if(answer===q.correct) earned=q.points;
  } else {
    answer=document.getElementById("textAnswer")?.value.trim()||"";
    if(Array.isArray(q.correct)){
      if(q.correct.some(c=>c.toLowerCase()===answer.toLowerCase())) earned=q.points;
    } else {
      if(answer.toLowerCase()===q.correct.toLowerCase()) earned=q.points;
    }
  }

  score+=earned;
  expl.style.display="block";
  expl.innerHTML=`
    <b>Правильный ответ:</b> ${q.correct}<br><br>
    <b>Комментарий:</b> ${comments[current+1]||"—"}<br><br>
    <b>Баллы:</b> ${earned}
  `;

  userAnswers.push({number:current+1,userAnswer:answer,points:earned});
}

// ================= ФИНИШ =================
function finish(){
  quiz.style.display="none";
  result.style.display="block";
  finalScore.textContent=`Результат: ${score}`;
  
  fetch("https://script.google.com/macros/s/AKfycbyq08E3OLptZDe0HWYmzE3oK4XEyB66U0bOlrA_u-uBnm419ELLpEcMWEAbk9MnqRp-/exec", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    firstName: firstName.value,
    lastName: lastName.value,
    contact: contact.value,
    score: score,
    answers: userAnswers
  })
})
.then(r => r.text())
.then(t => console.log("Server:", t))
.catch(e => console.error("Fetch error:", e));

}

</script>
</body>
</html>





